<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EngagementInvitation Card</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="card-bg">
    <div class="invitation-card" id="invitationCard">
      <div class="card-front">
        <div class="card-front-content">
          <div class="card-floral-top">
            <svg class="rings-svg" width="70" height="40" viewBox="0 0 70 40">
              <ellipse cx="25" cy="20" rx="14" ry="14" fill="none" stroke="#e6c96b" stroke-width="4"/>
              <ellipse cx="45" cy="20" rx="14" ry="14" fill="none" stroke="#bfa14a" stroke-width="4"/>
              <ellipse cx="25" cy="20" rx="14" ry="14" fill="none" stroke="#fffbe9" stroke-width="1.5"/>
              <ellipse cx="45" cy="20" rx="14" ry="14" fill="none" stroke="#fffbe9" stroke-width="1.5"/>
            </svg>
          </div>
          <h1 class="card-title">You're Invited</h1>
          <div class="card-subtitle">to an Engagement Celebration</div>
          <div class="card-subtitle tap-instruction">open me</div>
        </div>
      </div>
      <div class="card-inner">
        <img src="inv.jpg" alt="Invitation" class="card-image" />
      </div>
    </div>
  </div>
  
  <!-- Audio elements for sound effects -->
  <audio id="openSound" preload="auto" muted>
    <source src="book-open.mp3" type="audio/mpeg">
  </audio>
  <audio id="closeSound" preload="auto" muted>
    <source src="book-open.mp3" type="audio/mpeg">
  </audio>
  <audio id="backgroundSong" preload="auto" muted loop>
    <source src="song.mp3" type="audio/mpeg">
  </audio>
  
  <script>
    const card = document.getElementById('invitationCard');
    const openSound = document.getElementById('openSound');
    const closeSound = document.getElementById('closeSound');
    const backgroundSong = document.getElementById('backgroundSong');
    
    // Enable audio on first user interaction
    let audioEnabled = false;
    
    function enableAudio() {
      if (!audioEnabled) {
        openSound.muted = false;
        closeSound.muted = false;
        backgroundSong.muted = false;
        audioEnabled = true;
      }
    }
    
    card.addEventListener('click', function() {
      enableAudio(); // Enable audio on first click
      
      const isOpening = !this.classList.contains('open');
      this.classList.toggle('open');
      
      // Play appropriate sound effect with delay to align with animation
      if (isOpening) {
        setTimeout(() => {
          openSound.currentTime = 0;
          openSound.volume = 0.7;
          openSound.playbackRate = 1.0;
          openSound.play().catch(e => console.log('Audio play failed:', e));
          
          // Start background song after sound effect
          setTimeout(() => {
            backgroundSong.currentTime = 0;
            backgroundSong.volume = 0.4;
            backgroundSong.play().catch(e => console.log('Background song failed:', e));
          }, 1000); // Start song 1 second after opening sound
        }, 300); // Delay for opening animation
      } else {
        // Stop background song immediately when closing
        backgroundSong.pause();
        backgroundSong.currentTime = 0;
        
        setTimeout(() => {
          closeSound.currentTime = 0;
          closeSound.volume = 0.7;
          closeSound.playbackRate = 1; // Even faster playback for closing
          closeSound.play().catch(e => console.log('Audio play failed:', e));
        }, 900); // Delay for closing animation
      }
    });
    
    // Also enable audio on any touch/click anywhere on the page
    document.addEventListener('click', enableAudio, { once: true });
    document.addEventListener('touchstart', enableAudio, { once: true });
  </script>
</body>
</html> 